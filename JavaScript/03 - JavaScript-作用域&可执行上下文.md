---
cover: 'https://source.unsplash.com/user/erondu/1440x960'
coverWidth: 1200
coverHeight: 750
title: JavaScript作用域&可执行上下文
categories: JavaScript
tags: 作用域&可执行上下文
top:
permalink:
---
JavaScript深入 - 作用域相关问题

<!--more-->

### 01 / 什么是作用域?

作用域是指程序源代码中定义变量的区域

- 作用域规定了查找变量,也就是当前执行代码对变量的访问权限
- JavaScript采用词法作用域(静态作用域)

### 02 / 词法作用域和静态作用域的区别?

- 静态作用域:	函数的作用域在函数定义的时候就已经决定了
- 动态作用域:    函数的作用域在函数调用的时候才决定

### 03 / JS代码执行顺序是什么

JavaScript代码是逐行执行的 , 但是js引擎并非一行一行的解析执行程序,而是一段一段的分析执行,为什么是分段执行的呢?又按什么规则来分段的呢?这里我们需要再了解一下什么是**可执行代码**

### 04 / 可执行代码

可执行代码有三种,全局代码,函数代码,eval代码,当执行到可执行代码的时候,就会进行准备一些工作 . 这个准备工作就是**执行上下文**

- 全局代码
- 函数代码
- eval代码(evla()函数可以将传入的字符串当做 JavaScript 代码进行执行)

### 05 / 执行上下文栈

为了管理js中大量的可执行上下文,JavaScript引擎创建了**执行上下文栈**来管理可执行上下文

- 当 JavaScript 开始要解释执行代码的时候，最先遇到的就是全局代码，所以初始化的时候首先就会向执行上下文栈压入一个全局执行上下文，我们用 globalContext 表示它，并且只有当整个应用程序结束的时候，ECStack 才会被清空，所以程序结束之前， ECStack 最底部永远有个 globalContext.

  ```
  const ECStack  = [	
  	globalContext 
  ]
  ```

  

- 当函数开始执行的时候,同样生成一个可以执行上下文并压入可执行上下文栈,当函数执行完毕的时候,再从执行上下文栈中弹出

  ```
  const ECStack  = [
  	eval()
  	function()
  	globalContext 
  ]
  ```

## 06 / 什么是堆栈

堆栈概念存在于**数据结构**和**操作系统**内存中

- 在数据结构中:
  - 栈中的数据存取方式为先进后出
  - 堆是一个优先队列,按照优先级来进行排序的,优先级可以按照大小来规定
  
- 操作系统中: 

  **内存被分为栈区和堆区**

  - 栈区的内存由编译器自动分配释放,存放函数的参数值,局部变量值等
  - 堆内存一般由程序员释放,若没有手动释放则程序结束时由垃圾回收机制回收






